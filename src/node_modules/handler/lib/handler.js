var express, path;

path = require('path');

express = require('express');

express.HTTPServer.prototype.handler = express.HTTPSServer.prototype.handler = function(namespace, routes) {
  var action, app, callback, fn, method, setHandler, _results;
  if (!routes) {
    routes = namespace;
    namespace = "";
  }
  app = this;
  setHandler = function(method, action, fn) {
    return app[method]("/" + (path.join(namespace, action)), fn);
  };
  _results = [];
  for (action in routes) {
    callback = routes[action];
    if (typeof callback === "function") {
      _results.push(setHandler('get', action, callback));
    } else {
      _results.push((function() {
        var _results2;
        _results2 = [];
        for (method in callback) {
          fn = callback[method];
          _results2.push(setHandler(method, action, fn));
        }
        return _results2;
      })());
    }
  }
  return _results;
};
